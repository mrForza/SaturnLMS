2. Изменение пароля через ссылку  

На этом этапе пользователь использует полученную ссылку для перехода на страницу восстановления пароля и вводит новый пароль. 
Шаги: 

    Пользователь переходит по ссылке для восстановления пароля : 
        Пользователь получает письмо с ссылкой и переходит по ней. Ссылка содержит временный токен, который идентифицирует пользователя и проверяет, что он имеет право на смену пароля.
         

    Система проверяет временную ссылку : 
        При переходе по ссылке система проверяет, что токен в ссылке еще действителен (проверяется с помощью Kafka broker, где хранится информация о времени жизни ссылки).
         

    Пользователь отправляет POST-запрос с новым паролем : 
        На странице восстановления пароля пользователь вводит новый пароль и отправляет POST-запрос с этим паролем на API Gateway. В запросе также содержится валидный JWT.
         

    API Gateway перенаправляет запрос в ProfileService : 
        API Gateway получает запрос и перенаправляет его в ProfileService.
         

    ProfileService проверяет надежность нового пароля : 
        ProfileService выполняет проверку надежности нового пароля. Например, проверяются такие критерии, как длина пароля, наличие буквенных и цифровых символов, сложность и т. д.
        Если пароль не соответствует требованиям безопасности, Профильный сервис возвращает ошибку.
         

    ProfileService хэширует новый пароль : 
        После успешной проверки надежности новый пароль хэшируется с использованием безопасного алгоритма хеширования (например, bcrypt). Хэш сохраняется в базе данных вместо самого пароля для обеспечения безопасности.
         

    ProfileService сохраняет новый пароль в базу данных : 
        Профильный сервис обновляет запись пользователя в Profile Postgres RDBMS, заменяя старый хэш пароля на новый.
         

    ProfileService получает подтверждение об успешном сохранении : 
        После успешного обновления записи в базе данных ProfileService получает подтверждение об успешной операции.
         

    ProfileService удаляет событие о времени жизни ссылки из Kafka broker : 
        После успешной смены пароля ссылка больше не нужна, поэтому ProfileService отправляет запрос на удаление события о времени жизни ссылки из Kafka broker.
         

    Kafka broker подтверждает успешное удаление события : 
        Kafka broker подтверждает, что событие было успешно удалено.
         

    ProfileService возвращает ответ об успешной смене пароля : 
        После всех успешных операций ProfileService возвращает ответ пользователю, информируя его об успешной смене пароля.
         

    Пользователь получает сообщение об успешной смене пароля : 
        Пользователь видит сообщение о том, что пароль успешно изменен.
         
     